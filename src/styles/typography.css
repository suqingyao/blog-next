@layer base {
  .prose {
    /* Use DaisyUI theme variables for prose styling */
    @apply text-text font-fans font-semibold leading-normal break-words;

    & > p {
      @apply mb-5;
    }

    img {
      @apply inline-block max-w-full h-auto;
    }

    & > *:first-child {
      @apply mt-0;
    }

    & > *:last-child {
      @apply mb-0;
    }

    .anchor {
      @apply ml-1 opacity-0 transition-opacity hover:no-underline;
    }

    h2:hover .anchor,
    h3:hover .anchor,
    h4:hover .anchor,
    h5:hover .anchor,
    h6:hover .anchor {
      @apply opacity-100;
    }

    h2 {
      @apply text-lg my-7;
    }

    h3 {
      @apply text-base my-7;
    }

    h4 {
      @apply text-sm my-7;
    }

    h5 {
      @apply text-xs my-7;
    }

    h6 {
      @apply text-xs my-7;
    }

    p {
      @apply my-3;
    }

    /* Quotes */
    blockquote {
      padding-left: theme('spacing.6');
      border-left-width: theme('borderWidth.2');
      border-left-color: var(--prose-quote-borders);
      color: var(--prose-quotes);
      font-style: italic;
    }

    ul {
      @apply list-disc pl-5;
    }

    ol {
      @apply list-decimal pl-6;
    }

    & > ul,
    & > ol {
      @apply my-7;
    }

    /* List markers */
    ul > li::marker {
      color: var(--prose-bullets);
    }

    ol > li::marker {
      color: var(--prose-counters);
    }

    /* Links */
    a {
      color: var(--prose-links);
      text-decoration: underline;
      text-decoration-color: transparent;
      transition: color 0.2s, text-decoration-color 0.2s;

      &:hover {
        color: var(--prose-links-hover);
        text-decoration-color: currentColor;
      }
    }

    /* Bold text */
    strong {
      color: var(--prose-bold);
      font-weight: 600;
    }

    /* Figures */
    figcaption {
      color: var(--prose-captions);
      font-size: theme('fontSize.sm');
      line-height: theme('lineHeight.6');
      margin-top: theme('spacing.3');

      > p {
        margin: 0;
      }
    }

    /* Horizontal Rules */
    /* hr {
      margin-top: theme('spacing.20');
      margin-bottom: theme('spacing.20');
      border-top-width: 1px;
      border-color: var(--prose-hr);

      @media (min-width: theme('screens.lg')) {
        margin-left: calc(theme('spacing.12') * -1);
        margin-right: calc(theme('spacing.12') * -1);
      }
    } */

    /* Tables */
    .table-wrapper {
      @apply min-w-full rounded-xl text-sm my-7 whitespace-nowrap overflow-auto;
      border: 1px solid var(--prose-td-borders);
    }

    table {
      @apply min-w-full;
    }

    table thead {
      @apply text-left;
      color: var(--prose-headings);
    }

    table th {
      @apply px-3 py-4;
      border-bottom: 1px solid var(--prose-th-borders);
      font-weight: var(--prose-heading-weight);
    }

    table td {
      @apply px-3 py-4;
      border-bottom: 1px solid var(--prose-td-borders);
    }

    table tbody tr:nth-child(2n-1) {
      background-color: color-mix(in srgb, var(--prose-td-borders) 30%, transparent);
    }

    /* Inline Code */
    /* code:not(pre code) {
      color: var(--prose-code);
      background-color: var(--prose-code-bg);
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
      font-size: 0.875em;
      font-weight: 500;
    } */

    /* Code Blocks */
    /* pre {
      background-color: var(--prose-pre-bg);
      border-radius: 0.5rem;
      overflow-x: auto;

      code {
        color: var(--prose-pre-code);
        background-color: transparent;
        padding: 0;
        font-size: 0.875em;
        line-height: 1.7;
      }
    } */

    /* Math & Code Wrappers */
    .math {
      scrollbar-width: none;
      -ms-overflow-style: none;
      display: inline-block;
      max-width: 100%;
      overflow: auto;
      vertical-align: bottom;

      &::-webkit-scrollbar {
        display: none;
      }
    }

    .line-number::before {
      @apply inline-block w-4 text-right mr-5 -ml-2 text-zinc-400;
      content: attr(line);
    }

    pre.mermaid {
      @apply bg-transparent flex justify-center;
    }

    .block-tag {
      @apply block my-6;
    }

    .post-toc .katex {
      @apply font-normal leading-normal
    }
  }

  /* Shiki Dark Mode */
  [data-theme="dark"] .shiki,
  [data-theme="dark"] .shiki span,
  [data-theme="dark"] .shiki-content,
  [data-theme="dark"] .shiki-content span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
    font-style: var(--shiki-dark-font-style) !important;
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
  }

  /* Shiki content styling */
  .shiki-content {
    display: block;
    white-space: pre;
  }
}
