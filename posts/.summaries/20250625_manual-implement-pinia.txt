### 摘要
本文展示手动实现 Pinia 核心逻辑：通过 `defineStore` 工厂函数结合 Vue 的 `effectScope` API 创建独立响应式作用域，实现状态缓存与隔离；以 `useCounterStore` 为例演示其用法，说明该方案如何避免全局污染并支持资源管理。